RAG的实现流程：

一、构建知识库：
    1. 在DB中对数据库进行增、删、改、查（代码中暂未涉及改知识库）。
    2. 在指定知识库中进行文档的增、删、改、查（代码中同样暂未涉及改文档）。
        其中增加文档时，需要将文档存在本地，在DB中记录文档所属的知识库、文档名称、文档类型、存储地址等基本信息，对文档进行进行内容提取和处理（分页、划分chunk、embedding编码等）后存入ES。
        删除文档时代码中只从DB中删除，应该将本地存储的文件及ES中的文档信息一并删除？

二、用户问答
    1. 如果是第一轮对话，则根据用户提问使用指定的知识库进行检索（包括全文检索和语义检索，检索后根据配置决定是否进行重排序）相关的文档，并组合在prompt模板中，然后进行大模型调用。
    2. 不是第一轮对话的话则不需要知识库检索，直接将用户提问以及之前轮次对话的结果（放在system role中）送给大模型调用。